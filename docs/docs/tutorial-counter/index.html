<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.65">
<title data-react-helmet="true">Tutorial: Bean Counter | H2O Wave</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Tutorial: Bean Counter | H2O Wave"><meta data-react-helmet="true" name="description" content="In the previous tutorials, we&#x27;ve been authoring Wave scripts. A Wave script is a perfectly fine and dandy way to modify pages in Wave and build dashboards. However, to build interactive applications in Wave - user interfaces that can dynamically respond to events (the user&#x27;s actions) -  Wave apps are the way to go."><meta data-react-helmet="true" property="og:description" content="In the previous tutorials, we&#x27;ve been authoring Wave scripts. A Wave script is a perfectly fine and dandy way to modify pages in Wave and build dashboards. However, to build interactive applications in Wave - user interfaces that can dynamically respond to events (the user&#x27;s actions) -  Wave apps are the way to go."><meta data-react-helmet="true" property="og:url" content="https://h2oai.github.io/wave//wave/docs/tutorial-counter"><link data-react-helmet="true" rel="shortcut icon" href="/wave/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://h2oai.github.io/wave//wave/docs/tutorial-counter"><link rel="stylesheet" href="/wave/styles.4ea50ba0.css">
<link rel="preload" href="/wave/styles.f5ed2e52.js" as="script">
<link rel="preload" href="/wave/runtime~main.f64344fe.js" as="script">
<link rel="preload" href="/wave/main.64610da1.js" as="script">
<link rel="preload" href="/wave/1.d3a71930.js" as="script">
<link rel="preload" href="/wave/2.95b8a467.js" as="script">
<link rel="preload" href="/wave/235.30963dc0.js" as="script">
<link rel="preload" href="/wave/236.908f536c.js" as="script">
<link rel="preload" href="/wave/935f2afb.aeb7338a.js" as="script">
<link rel="preload" href="/wave/17896441.78666ca0.js" as="script">
<link rel="preload" href="/wave/950656ac.0aadf206.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/wave/"><img class="navbar__logo" src="/wave/img/logo.svg" alt="H2O Wave"><strong class="navbar__title">H2O Wave</strong></a><a class="navbar__item navbar__link" href="/wave/docs/examples">Gallery</a><a class="navbar__item navbar__link" href="/wave/docs/getting-started">Get Started</a><a class="navbar__item navbar__link" href="/wave/docs/guide">Guide</a><a class="navbar__item navbar__link" href="/wave/docs/enterprise">Enterprise</a><a class="navbar__item navbar__link" href="/wave/docs/api/index">API</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/h2oai/wave/releases/latest" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Download</a><a href="https://github.com/h2oai/wave" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/wave/"><img class="navbar__logo" src="/wave/img/logo.svg" alt="H2O Wave"><strong class="navbar__title">H2O Wave</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/wave/docs/examples">Gallery</a></li><li class="menu__list-item"><a class="menu__link" href="/wave/docs/getting-started">Get Started</a></li><li class="menu__list-item"><a class="menu__link" href="/wave/docs/guide">Guide</a></li><li class="menu__list-item"><a class="menu__link" href="/wave/docs/enterprise">Enterprise</a></li><li class="menu__list-item"><a class="menu__link" href="/wave/docs/api/index">API</a></li><li class="menu__list-item"><a href="https://github.com/h2oai/wave/releases/latest" target="_blank" rel="noopener noreferrer" class="menu__link">Download</a></li><li class="menu__list-item"><a href="https://github.com/h2oai/wave" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Prologue</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/change-log">Change Log</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/migrating-0">Migrating from pre-alpha</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/contributing">Contributing</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wave/docs/getting-started">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wave/docs/installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wave/docs/tour">A Tour of Wave</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wave/docs/tutorial-hello">Tutorial: Hello World</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wave/docs/tutorial-beer">Tutorial: Beer Wall</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wave/docs/tutorial-monitor">Tutorial: System Monitor</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/wave/docs/tutorial-counter">Tutorial: Bean Counter</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wave/docs/tutorial-todo">Tutorial: Todo List</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/guide">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/architecture">Architecture</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/scripts">Wave Scripts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/apps">Wave Apps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/pages">Pages</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/layout">Layout</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/cards">Cards</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/buffers">Data Buffers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/components">Components</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/arguments">Event Arguments</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/state">State</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/routing">Routing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/realtime">Realtime Sync</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/expressions">Data-binding</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/files">Files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/plotting">Plots</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/graphics">Graphics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/security">Security</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/logging">Logging</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/development">Development</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/browser-testing">Browser Testing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/configuration">Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/backup">Backup and Recovery</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Enterprise</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/enterprise/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/enterprise/basic-concepts">Basic Concepts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/enterprise/developer-guide">Developer Guide</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Examples</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples">Gallery</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/hello-world">Hello World!</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/todo">To-do List App</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/wizard">Wizard</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/issue-tracker">Issue Tracker</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/dashboard">Dashboard</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/stat-small">Stat / Small</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/stat-large">Stat / Large</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/stat-wide-gauge">Stat / Gauge / Wide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/stat-tall-gauge">Stat / Gauge / Tall</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/stat-wide-bar">Stat / Bar / Wide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/stat-large-bar">Stat / Bar / Large</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/stat-small-series-area">Stat / Series / Small / Area</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/stat-small-series-interval">Stat / Series / Small / Interval</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/stat-wide-series-area">Stat / Series / Wide / Area</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/stat-wide-series-interval">Stat / Series / Wide / Interval</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/stat-tall-series-area">Stat / Series / Tall / Area</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/stat-tall-series-interval">Stat / Series / Tall / Interval</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/layout">Layout / Position</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/layout-size">Layout / Size</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/form">Form</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/text">Form / Text</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/text-sizes">Form / Text / Sizes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/label">Form / Label</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/link">Form / Link</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/progress">Form / Progress</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/progress-update">Form / Progress / Updating</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/message-bar">Form / Message Bar</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/textbox">Form / Textbox</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/textbox-trigger">Form / Textbox / Trigger</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/button">Form / Button</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/buttons">Form / Buttons</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/checkbox">Form / Checkbox</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/checklist">Form / Checklist</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/picker">Form / Picker</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/picker-selection">Form / Picker / Selection</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/dropdown">Form / Dropdown</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/choice-group">Form / Choice Group</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/combobox">Form / Combobox</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/toggle">Form / Toggle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/spinbox">Form / Spinbox</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/slider">Form / Slider</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/range-slider">Form / Range Slider</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/date-picker">Form / Date Picker</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/date-picker-trigger">Form / Date Picker / Trigger</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/color-picker">Form / Color Picker</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/swatch-picker">Form / Swatch Picker</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/tabs">Form / Tabs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/separator">Form / Separator</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/file-upload">Form / File Upload</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/form-frame">Form / Frame</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/form-frame-path">Form / Frame / Path</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/form-menu">Form / Menu</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/form-template">Form / Template</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/form-markup">Form / Markup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/stepper">Stepper</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/table-markdown">Table / Markdown</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/table">Table</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/table-sort">Table / Sort</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/table-search">Table / Search</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/table-filter">Table / Filter</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/table-filter-backend">Table / Filter / Backend</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/table-download">Table / Download</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/table-groupby">Table / Group by</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/table-select">Table / Preselection</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/image">Image</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/frame">Frame</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/frame-path">Frame / Path</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/template">Template</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/template-data">Template / Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/markdown">Markdown</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/markdown-data">Markdown / Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/markup">Markup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/nav">Nav</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/toolbar">Toolbar</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/tab">Tab</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/tab-link">Tab / Links</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/tab-delete">Tabs / Navigation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/breadcrumbs">Breadcrumbs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/header">Header</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/hash-routing">Routing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/toolbar-routing">Routing / Toolbar</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/tab-routing">Routing / Tabs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/card-menu">Context Menu</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-point">Plot / Point</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-point-shapes">Plot / Point / Shapes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-point-sizes">Plot / Point / Sizes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-point-map">Plot / Point / Map</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-point-groups">Plot / Point / Groups</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-point-annotation">Plot / Point / Annotation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-point-custom">Plot / Point / Custom</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-interval">Plot / Interval</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-interval-transpose">Plot / Interval / Transpose</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-interval-groups">Plot / Interval / Groups</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-interval-groups-transpose">Plot / Interval / Groups / Transpose</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-interval-labels">Plot / Interval / Labels</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-interval-range">Plot / Interval / Range</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-interval-range-transpose">Plot / Interval / Range / Transpose</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-interval-stacked">Plot / Interval / Stacked</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-interval-stacked-transpose">Plot / Interval / Stacked / Transpose</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-interval-stacked-grouped">Plot / Interval / Stacked / Grouped</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-interval-stacked-grouped-transpose">Plot / Interval / Stacked / Grouped / Transpose</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-interval-polar">Plot / Interval / Polar</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-interval-polar-stacked">Plot / Interval / Polar / Stacked</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-interval-theta">Plot / Interval / Theta</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-interval-helix">Plot / Interval / Helix</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-interval-annotation">Plot / Interval / Annotation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-interval-annotation-transpose">Plot / Interval / Annotation / Transpose</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-line">Plot / Line</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-line-groups">Plot / Line / Groups</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-line-smooth">Plot / Line / Smooth</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-step">Plot / Line / Step</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-step-after">Plot / Line / Step / After</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-step-before">Plot / Line / Step / Before</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-line-labels">Plot / Line / Labels</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-line-labels-stroked">Plot / Line / Labels/ Stroked</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-line-labels-no-overlap">Plot / Line / Labels / Occlusion</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-line-annotation">Plot / Line / Annotation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-path">Plot / Path</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-path-point">Plot / Path / Point</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-path-smooth">Plot / Path / Smooth</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-area">Plot / Area</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-area-groups">Plot / Area / Groups</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-area-negative">Plot / Area / Negative</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-area-range">Plot / Area / Range</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-area-smooth">Plot / Area / Smooth</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-area-stacked">Plot / Area / Stacked</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-area-line">Plot / Area + Line</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-area-line-smooth">Plot / Area + Line / Smooth</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-area-line-groups">Plot / Area + Line / Groups</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-polygon">Plot / Polygon</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-histogram">Plot / Histogram</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-axis-title">Plot / Axis Titles</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-form">Plot / Form</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-vegalite">Plot / Vega-lite</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-vegalite-update">Plot / Vega-lite / Update</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-vegalite-form">Plot / Vega-lite / Form</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-altair">Plot / Altair</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-bokeh">Plot / Bokeh</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-matplotlib">Plot / Matplotlib</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-plotly">Plot / Plotly</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/plot-d3">Plot / D3.js</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/pixel-art">Pixel Art</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/upload">Uploads</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/upload-async">Uploads / Async</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/upload-ui">Uploads / UI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/upload-download">Uploads / Download</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/meta-title">Meta / Title</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/meta-notification">Meta / Notification</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/meta-refresh">Meta / Refresh</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/meta-redirect">Meta / Redirect</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/counter-global">Mode / Broadcast / Global</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/counter-broadcast">Mode / Broadcast</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/counter-multicast">Mode / Multicast</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/counter-unicast">Mode / Unicast</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/graphics-primitives">Graphics / Primitives</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/graphics-spline">Graphics / Spline</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/graphics-clock">Graphics / Clock</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/graphics-path">Graphics / Path</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/graphics-turtle">Graphics / Turtle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/graphics-hilbert">Graphics / Hilbert</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/examples/glider-gun">Graphics / Glider Gun</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/api/index">Package h2o_wave</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/api/core">Module h2o_wave.core</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/api/ui">Module h2o_wave.ui</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/api/server">Module h2o_wave.server</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/api/graphics">Module h2o_wave.graphics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/api/types">Module h2o_wave.types</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wave/docs/api/test">Module h2o_wave.test</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Tutorial: Bean Counter</h1></header><div class="markdown"><p>In the previous tutorials, we&#x27;ve been authoring <a href="/wave/docs/scripts">Wave scripts</a>. A Wave script is a perfectly fine and dandy way to modify pages in Wave and build dashboards. However, to build <em>interactive applications</em> in Wave - user interfaces that can dynamically respond to <em>events</em> (the user&#x27;s actions) -  <a href="/wave/docs/apps">Wave apps</a> are the way to go.</p><p>In the fine tradition of keeping tutorials succinct and useful, we&#x27;ll author a little app that counts beans of the virtual kind, or, a bean counter, not to be confused with dubiously intentioned financial officers.</p><video autoplay="autoplay" loop="" muted=""><source src="/wave/assets/medias/tutorial-counter__demo-f3f19f437fc40cbcb7211837b2ce7e39.mp4" type="video/mp4"></video><p>This tutorial outlines the basics of how to handle events, update the UI, manage state and easily add realtime sync capabilities to your app. It&#x27;s probably the most important tutorial to wrap your head around if you&#x27;re interesting in authoring interactive applications.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="prerequisites"></a>Prerequisites<a aria-hidden="true" tabindex="-1" class="hash-link" href="#prerequisites" title="Direct link to heading">#</a></h2><p>This tutorial assumes your Wave server is up and running, and you have a working directory for authoring programs. If not, head over to the <a href="/wave/docs/tutorial-hello">Hello World tutorial</a> and complete steps 1 and 2.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="step-1-start-listening"></a>Step 1: Start listening<a aria-hidden="true" tabindex="-1" class="hash-link" href="#step-1-start-listening" title="Direct link to heading">#</a></h2><p>The first step towards listening to events from the UI is to, literally, <code>listen</code>.</p><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">$HOME/wave-apps/counter.py</div><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd undefined">Copy</button><div tabindex="0" class="prism-code language-py codeBlock_3iAC codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> h2o_wave </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> Q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> listen</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">async</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">serve</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">pass</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">listen</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/counter&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> serve</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div><p><code>listen()</code> is a function that takes two required arguments:</p><ol><li>The route to listen to, in this case <code>/counter</code> (which translates to <code>localhost:55555/counter</code> or <code>www.example.com/counter</code>).</li><li>The function to call when a event arrives from the UI, in this case <code>serve()</code> (but you can call it anything you please, like <code>shoe_strings()</code>).</li></ol><p>It&#x27;s important to understand that <code>serve()</code> is called on every event from the UI. No matter how many event originate from the UI, they all pass through <code>serve()</code>.</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p><code>serve()</code> is an <code>async</code> function, and must be declared as <code>async def serve(...)</code> instead of plain <code>def serve(...)</code>.</p></div></div><p>Next, run your app:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-shell codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> </span><span class="token environment constant" style="color:rgb(130, 170, 255)">$HOME</span><span class="token plain">/wave-apps</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">./venv/bin/python counter.py</span></div></div></div></div></div><p>At this point, your app will be up and running, but it doesn&#x27;t do anything yet. Let&#x27;s change that in a second.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="step-2-display-a-button"></a>Step 2: Display a button<a aria-hidden="true" tabindex="-1" class="hash-link" href="#step-2-display-a-button" title="Direct link to heading">#</a></h2><p>Let&#x27;s add a button to our app. Out goal is to increment and display the bean count each time the button is clicked.</p><p>To do this, we declare a variable called <code>bean_count</code>, and use <code>form_card()</code> to add a <a href="https://en.wikipedia.org/wiki/Form_(document)" target="_blank" rel="noopener noreferrer">form</a> to our page. A form card is a special type of card that displays a vertical stack of <a href="/wave/docs/components">components</a> (also called <em>widgets</em>). In this case our form contains a solitary button named <code>increment</code>, with a caption showing the current <code>bean_count</code>. The button is marked as <code>primary</code>, which serves no other purpose than to make it look tall, dark, and handsome. </p><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">$HOME/wave-apps/counter.py</div><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd undefined">Copy</button><div tabindex="0" class="prism-code language-py codeBlock_3iAC codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> h2o_wave </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> Q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> listen</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> ui</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">async</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">serve</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    bean_count </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;beans&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> ui</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">form_card</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        box</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;1 1 1 2&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        items</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">            ui</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">button</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">                name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;increment&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">                label</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Click me!&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">                caption</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string-interpolation string" style="color:rgb(195, 232, 141)">f&#x27;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string-interpolation interpolation">bean_count</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-interpolation string" style="color:rgb(195, 232, 141)"> beans&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">                primary</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token boolean" style="color:rgb(255, 88, 116)">True</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">save</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">listen</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/counter&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> serve</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div><p>Notice how the technique to modify and save pages in a Wave app is different from that of a Wave script.</p><table><thead><tr><th>Task</th><th>Wave Script</th><th>Wave App</th></tr></thead><tbody><tr><td>Access page at route <code>/foo</code></td><td><code>page = site[&#x27;/foo&#x27;]</code></td><td><code>page = q.page</code></td></tr><tr><td>Access card named <code>foo</code></td><td><code>card = page[&#x27;foo&#x27;]</code></td><td><code>card = q.page[&#x27;foo&#x27;]</code></td></tr><tr><td>Save page</td><td><code>page.save()</code></td><td><code>await q.page.save()</code></td></tr></tbody></table><p>In a Wave app, we always access the page using the <em>query context</em> <code>q</code>. The query context carries useful information about the active UI event, including who issued the event, what information was entered, which buttons were clicked, and so on; and <code>q.page</code> always refers to the page located at the route you passed to <code>listen()</code> (in this case, <code>/counter</code>).</p><p>Restart your app (<code>^C</code> and run it again):</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-shell codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> </span><span class="token environment constant" style="color:rgb(130, 170, 255)">$HOME</span><span class="token plain">/wave-apps</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">./venv/bin/python counter.py</span></div></div></div></div></div><p>Point your browser to <a href="http://localhost:55555/counter" target="_blank" rel="noopener noreferrer">http://localhost:55555/counter</a>. You should see a nice big button, waiting to be clicked on:</p><p><img alt="Button" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKEAAADDCAYAAADqbXHnAAAABHNCSVQICAgIfAhkiAAAABl0RVh0U29mdHdhcmUAZ25vbWUtc2NyZWVuc2hvdO8Dvz4AAAAtdEVYdENyZWF0aW9uIFRpbWUARnJpIDAyIE9jdCAyMDIwIDEwOjAyOjQ2IFBNIFBEVCA88x4AAA0DSURBVHic7d1/TFX1H8fx1zlcEOxe5viRoMIqAxfrF+GW/VMrmStqJcVa9oeIGZqERT801yqCraSlBmONsqKlZRoWtNjQP6y0FQ2GWsxBOfIHAvHjcruXC4jc+/n+gZwvCMi9F+zdhddjuxM853zOuZcn55wL53I1p9OpQCRIl94AIkZI4hghiWOEJI4RkjhGSOIYIYljhCSOEZI4RkjiGCGJM03HIErx18+zmaZpU1re5wgnCo9Bzg4jwxv5NfclSK8jHLnCoKAgmEymKX8nkH9TSmFwcBADAwNGH9404dU54fAKlFIICgpCYGAgAyRomobAwEAEBQWNasRTXj8xUUpBKQWTaVpOJ2kGMZlMRh/e8DhCY+BLK+EekC6nadpQJ17uDb0+HCsvBqfZx5dGfD4cE43nqh2OR55sMkK6kssb8aQVn35jwghpIr60wV/bkTjvnx0TeeiqPDu+NLT3i9Asc5V+Tkh0tTBCEscISRwjJHGMkMQxQhLHCEkcIyRxjJDEMUISxwhJHCMkcYyQxDFCEicSYWlpKSwWCzRN420abxaLBaWlpRJf0inRPHkfk5GvG3C7XXC53AgLC/N5pRaLBT09PT4vTxMzm81wOBxi67darQgI0KHrAaO+Qa5EZE/IAK8ef3xseU5I4hghiWOEJI4RkjhGSOIYIYljhCSOEZI4RkjiGCGJY4QkjhGSOEZI4hghiWOEJI4RkjhGSOIYIYmb8REuWbIE2dnZmDNnjvSm0AT8LsIHHngAP/zwA/755x+0traioqICiYmJxvSIiAgopVBVVQUAyM/PR1FREVJSUjwav76+Hv39/Vdl2z2RkpICpRQ++ugjsW34t/nVW3Vu2LAB77//PtxuN6qrqxESEoKHH34Y999/P+699178/PPPY5bJy8tDbW2tEeV/3cDAAADg4sWLwlvy7/GbCGNjY7Fz507YbDbcd999OH78OADgwQcfREVFBXbv3o0bb7xxzHL19fWor6//tzfXZ8PxzaYI/eZwvGrVKgQHB2Pbtm1GgABQWVmJ4uJi/PXXX4iOjh6zXHFxMZRSWLZsmfF/69evR0NDA/r7+9HQ0IB169ZNuN7h5d96660x09LS0qCUwpYtW3Dw4EH09fWhtrYWcXFxyM/PR2dnJ9rb25GTkzNquczMTDQ2NqK3txcnTpzAk08+aUwb3hMO/zsb+E2Ew+d9hw4dGjPt+eefR3JyMlpaWiYdJzs7GyUlJXC73SgsLMTg4CB27dqFxx9/fMy8GzduRFZWFsrKyvDqq69OOObmzZvR1NSEqqoqJCUl4ciRI7jnnnuwa9cumEwmbN++HTfffLMx5gcffICuri4UFBSgr68Pn3/+OVavXg1gdu4J4XQ61WS3np4e5XA4lN1uVzZbt+rq6lJTgaG3/PHqdujQIaWUUjExMVecLyIiQimlVFVVlQKgiouLlVJKLVu2TOm6rlpbW5XD4VBhYWEKgLr22mtVXV2dKiwsVABUfX296u/vV8nJyerixYvq119/VSEhIeOuKy0tTSmlVGlpqQKgdF1XbW1tamBgQJnNZgVAvfLKK0oppVavXm1MP3/+vJo3b54KDg5WFotFtbe3q5qaGgVA3XbbbUoppfLy8nx6nABM6WszVV1dXcpm61Z2u105HA7V09MzaV9+c07Y3d0NAAgLC8O5c+d8GiM6OhpRUVE4cuQIrFYrAKC9vR133HHHqPnmzJmDb775BiaTCRkZGejr67viuI2NjQAAt9sNm80Gk8lk/CWEzs5OAMDcuXMRHR2N+fPnj7o/wwIDAwHwcPyfNnwemJycPGZafn4+ysrKEB4efsUxJvubKCOZzWYAwJtvvunFVl7Z8PrPnDmDu+66a9RtxYoVAIDW1lbk5OT4zbP56eA3Ee7duxcXLlzA1q1bccsttxj/n5KSgq1btyIhIQFdXV1XHKOlpQVtbW1ITEzEggULAABRUVGoq6tDYWHhqHlDQ0Px448/Ii0tDenp6dNyH1paWtDR0QFN0/Dbb7+huroaNTU1uPvuuxETEwMAsNlsOHz4sF89o58qv4nw9OnT2Lx5M8LDw1FXV4effvoJNTU1qKyshMvlwtq1aycdw+124+2334bFYsHhw4exY8cOfP/990hMTER1dbUx34ULF+BwOJCeng673Y6ioiJcd911U74Pbrcb77zzDmJjY3H06FHk5eXh4MGDKCgoMJ54paam4sSJEygpKZny+vyF30QIAEVFRVi5ciWqq6tx6623YsmSJaisrERSUtKoiCYbY+PGjdA0DVlZWTCZTHjmmWewd+/eMfOeOXMGzz33HEJDQ7F7927o+tQfrnfffRfZ2dkwm83YsmUL4uPjkZubi9zcXADA+fPn0d3djZMnT055Xf5C5O8TenNuRt5Tgm+Q7jd/n5BoJEZI4hghiWOEJI4RkjhGSOIYIYnzqwgfffRRnDp1Cna7Hfv27YPFYhl3vvLycqxcufJf3jryld9EGB8fjw8//BAZGRmIiopCb28viouLpTeLpoHfRLhmzRqUlpbi6NGj6O3tRU5ODh577DFcc801484fFxeH+vp6Y68ZGhpqTEtNTUVjYyO6u7tx4MAB4/IqTdPwxhtvoLm5Gd3d3fjiiy8wd+5cAENXWOfm5qKmpgYdHR2oqKgwpoWHh6OsrAznzp1DU1MT98Je8psIb7/9dvzyyy/G5zabDX/++ScSEhLGnT89PR0pKSmIjIyEy+XCzp07AQAJCQkoKSnBE088gYiICDQ1NeHjjz8GACxduhTLly/H0qVLERkZiaCgIGRmZhpjpqamYsWKFVi0aBEsFguefvppAEBubi7Onj2L2NhYPPTQQ8jIyOCvJr3gNxe1hoaGGheiDrPb7aP2cCOVlpbi7NmzAICXXnoJf/zxB9atW4dVq1ahpKQEx44dAwC89tprsFqtCAkJMS6r0nUdMTExsFqtiIuLM8b86quvjItRy8vLcdNNNwEA+vv7ERsbi/nz5+PkyZN45JFHpv3+z2R+syccL7iwsDDY7fZx5x8OEBi6jk/XdVgsFixcuBCvv/462tra0NbWhtOnT2NwcBDh4eGIjIzEgQMHcOrUKXzyySeIj49HQECAMY7NZjM+HhgYMK6GzsvLw99//43a2locO3Zs3Ner0MT8JsLjx4+PesVcWFgYbrjhhgkveVq8eLHx8cKFC+FyueBwONDa2opt27YhKirKuIWGhqK5uRkvv/wyOjs7sXjxYixfvhyVlZUebZvD4cCmTZuwaNEibNq0CZ9++ikiIyOndodnEb+J8LPPPkNmZibuvPNOzJs3D++99x6+/vprOJ3Ocedfv349rr/+egQHB2PHjh3Yv38/lFL48ssvsXbtWiQlJUHTNKSlpaG8vNxYTtM06LqO+Ph4PPXUUx5t2759+4xzR6vVioGBAbjd7qnf6VnCbyJsaGgwLj5tbm6G2WzGs88+O+H827dvx7fffouOjg4EBgbihRdeAAD8/vvv2LBhA/bs2QObzYYXX3wReXl5AICCggIsWLAAnZ2d2LNnD7777juPti03Nxdr1qyB1WrF/v37kZWVNelLDej/eFHrDMSLWom8xAhJHCMkcYyQxDFCEscISRwjJHGMkMQxQhLHCEkcIyRxjJDEMUISxwhJHCMkcYyQxDFCEscISRwjJHEiEQ6/UQ1NP398bEUiLCoq8ssH67/ObDajqKhIejO8JvJqO5q5+Go78kuMkMQxQhLHCEkcIyRxjJDEMUISxwhJHCMkcYyQxDFCEscISRwjJHGMkMQxQhLHCEkcIyRxjJDEMUISxwhJHCMkcYyQxDFCEscISRwjJHGMkMQxQhLHCEkcIyRxjJDEMUISxwhJHCMkcYyQxDFCEscISRwjJHGMkMQxQhLHCEkcIyRxjJDEMUISxwhJHCMkcYyQxDFCEscISRwjJHGMkMQxQhLHCEkcIyRxjJDEMUISxwhJHCMkcYyQxDFCEscISRwjJHGMkMQxQhLHCEkcIyRxPkSoTf9W0AzjXSMeR6hpowdWSnm1Ipr5Lm/i8mYm4vPhuL+/39dFaYbytQmfItQ0DU6nE729vdwjEpRS6O3thdPp9HjvN5LmdDo9qkgpBaUU3G433G43XC4X3C4XXG63MQ1QYJOzw1BrGjRt6Bag69ADAhAQEABd16HrujFtMibvVz40sK5pULqOAABuI8JhLHFm+39Ywy1ouj70r4fhjeRVhJqmAUoNrWg4QE2DdnmESjHDGWpoBzg6wpEhapoGDZ4/KQG8iFDTtKHQLq1E13WoEQHy3HB20kbs/Yy94KUAPQ3Rp8MxMPQdoS6FOXGADHNmGT8qI8ChT67+4VhdOhxjxKGZe8HZTRtnz3dVDseXD27EeNkKGeTsMFFkvvyIxusIx1vZyPB82Qjyb1P9mvsc4XRuBM1uvIqGxDFCEscISRwjJHGMkMT9D/WWKXBlMGN9AAAAAElFTkSuQmCC"></p><p>If you click on the button, you&#x27;ll notice that it doesn&#x27;t do anything. This is because we haven&#x27;t handled button clicks yet. Instead, when you click the button, the events are sent to your <code>serve()</code> function, but the <code>serve()</code> function blindly adds the form (with the button) to the page all over again and saves it, causing the page to display the same form all over again. Let&#x27;s fix this next. </p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="step-3-handle-button-clicks"></a>Step 3: Handle button clicks<a aria-hidden="true" tabindex="-1" class="hash-link" href="#step-3-handle-button-clicks" title="Direct link to heading">#</a></h2><p>Add a condition to check if the button is clicked, and if so, increment the bean count.</p><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">$HOME/wave-apps/counter.py</div><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd undefined">Copy</button><div tabindex="0" class="prism-code language-py codeBlock_3iAC codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> h2o_wave </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> Q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> listen</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> ui</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">async</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">serve</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    bean_count </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">bean_count </span><span class="token keyword" style="font-style:italic">or</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">increment</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">bean_count </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> bean_count </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> bean_count </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;beans&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> ui</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">form_card</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        box</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;1 1 1 2&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        items</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ui</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">button</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;increment&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                label</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Click me!&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                caption</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string-interpolation string" style="color:rgb(195, 232, 141)">f&#x27;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string-interpolation interpolation">bean_count</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-interpolation string" style="color:rgb(195, 232, 141)"> beans&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                primary</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token boolean" style="color:rgb(255, 88, 116)">True</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">save</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">listen</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/counter&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> serve</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div><p>The above edit introduces two important concepts: <code>q.client</code> and <code>q.args</code>. </p><ul><li><code>q.client</code> is a dictionary-like object for storing and retrieving arbitrary information related to the active <em>client</em> (a browser tab or browser session). Anything you put into <code>q.client</code> while handling a event can be read back while handling a subsequent event, provided the subsequent event originates from the same client. In our case, we read <code>q.client.bean_count</code> to get the bean count. If it&#x27;s unavailable (which means this is a new client), we default the bean count to <code>0</code>.</li><li><code>q.args</code>, also a dictionary-like object, carries <em>event arguments</em>, which contains information about what the user did. In our case, if the user clicked on our button (named <code>increment</code>), <code>q.args.increment</code> will be <code>True</code>. If not, <code>q.args.increment</code> will be <code>None</code>. Therefore, if <code>q.args.increment</code> is <code>True</code>, we increment the client&#x27;s <code>bean_count</code>. If not, we do nothing.</li></ul><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>From now on, any time you see the term &#x27;client&#x27;, recall that it&#x27;s a technical term for &#x27;browser tab&#x27; or &#x27;browser session&#x27;. In other words, any time you open a new browser tab to access your app, you&#x27;re accessing your app from a new client.</p></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Each component in the Wave component library populates <code>q.args</code> with its own value. For more information, see <a href="/wave/docs/components">Components</a>.</p></div></div><p>Go ahead and restart your app (<code>^C</code> and run it again):</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-shell codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> </span><span class="token environment constant" style="color:rgb(130, 170, 255)">$HOME</span><span class="token plain">/wave-apps</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">./venv/bin/python counter.py</span></div></div></div></div></div><p>Point your browser to <a href="http://localhost:55555/counter" target="_blank" rel="noopener noreferrer">http://localhost:55555/counter</a>. Your button should now count beans when clicked:</p><video autoplay="autoplay" loop="" muted=""><source src="/wave/assets/medias/tutorial-counter__demo-f3f19f437fc40cbcb7211837b2ce7e39.mp4" type="video/mp4"></video><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="step-4-make-it-more-efficient"></a>Step 4: Make it more efficient<a aria-hidden="true" tabindex="-1" class="hash-link" href="#step-4-make-it-more-efficient" title="Direct link to heading">#</a></h2><p>Our program is accurate, but not necessarily efficient. On every button-click, it is recreating the form card and the button over and over again instead of updating the existing button&#x27;s caption with the current bean count. You can observe how chatty the app is by gaping in abject horror at the Wave server&#x27;s log.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>To view the Wave server&#x27;s log, switch to the terminal window running the Wave server.</p></div></div><p>Let&#x27;s wrinkle our noses in disgust and fix this gross inefficiency right away to make our little bean counter web-scale for great good.</p><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">$HOME/wave-apps/counter.py</div><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd undefined">Copy</button><div tabindex="0" class="prism-code language-py codeBlock_3iAC codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> h2o_wave </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> Q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> listen</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> ui</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">async</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">serve</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    bean_count </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">bean_count </span><span class="token keyword" style="font-style:italic">or</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">increment</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">bean_count </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> bean_count </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> bean_count </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">not</span><span class="token plain"> q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">initialized</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">initialized </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">True</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;beans&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> ui</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">form_card</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            box</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;1 1 1 2&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            items</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                ui</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">button</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;increment&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    label</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Click me!&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    caption</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string-interpolation string" style="color:rgb(195, 232, 141)">f&#x27;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string-interpolation interpolation">bean_count</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-interpolation string" style="color:rgb(195, 232, 141)"> beans&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    primary</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token boolean" style="color:rgb(255, 88, 116)">True</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">else</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;beans&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">items</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">button</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">caption </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:rgb(195, 232, 141)">f&#x27;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string-interpolation interpolation">bean_count</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-interpolation string" style="color:rgb(195, 232, 141)"> beans&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">save</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">listen</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/counter&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> serve</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div><p>In the above edit, we check for an arbitrary flag in <code>q.client</code> called <code>initialized</code>. </p><ul><li>If the flag is not set, we assume that the request is originating from new, empty client. If so, we set <code>initialized</code> to <code>True</code> (to make a note to ourselves that the client is not empty anymore), then add our form card to the page.</li><li>If the flag is already set, we assume that the form card (and the button inside it) are already on the page, and simply update the button&#x27;s caption with the new bean count.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="intermission-understanding-state"></a>Intermission: Understanding state<a aria-hidden="true" tabindex="-1" class="hash-link" href="#intermission-understanding-state" title="Direct link to heading">#</a></h2><p>In the above steps, we learned about <code>q.args</code> (request arguments submitted from the browser) and <code>q.client</code> (arbitrary information associated with the client). Let&#x27;s expand on these and introduce two new concepts: <code>q.user</code> and <code>q.app</code>. </p><p>Before we do that, try accessing <a href="http://localhost:55555/counter" target="_blank" rel="noopener noreferrer">http://localhost:55555/counter</a> from two different browser tabs and playing with them. You&#x27;ll notice that each browser tab (or, each client) maintains separate bean counts.</p><video autoplay="autoplay" loop="" muted=""><source src="/wave/assets/medias/tutorial-counter__client-879d907addd9c36d405015546d0c0fdd.mp4" type="video/mp4"></video><p>Maintaining separate bean counts per client is one way to count beans. You can also maintain bean counts at the user level and the app level. </p><p>In real world apps, the decision on whether to store information at the client, user, or app level depends on the problem you&#x27;re trying to solve. For example, if you were building an online store, you&#x27;d probably want to store product inventory at the app level and shopping carts at the user level. Most other kinds of information - search results, past orders, or product details - are best stored at the client-level (searching for products in one tab and having search results appear in another tab would drive even your most loyal customers up the wall).</p><p>Similar to how <code>q.client</code> stores arbitrary information associated with the client, <code>q.user</code> and <code>q.app</code> store arbitrary information associated with the user and the app, respectively.</p><p>In most apps, you&#x27;ll end up using a mix of <code>q.client</code>, <code>q.user</code> and <code>q.app</code> to correctly handle requests originating from:</p><ol><li>Different users.</li><li>Different browser tabs belonging to the same user (possibly from different devices).</li><li>The same browser tab.</li></ol><p>In other words, your Wave app is multi-user by default, but how the app manages data at the app-level, at the user-level and at the client-level is up to you.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="step-6-user-level-realtime-sync"></a>Step 6: User-level realtime sync<a aria-hidden="true" tabindex="-1" class="hash-link" href="#step-6-user-level-realtime-sync" title="Direct link to heading">#</a></h2><p>To maintain bean counts at the user level, all we have to do store <code>bean_count</code> in <code>q.user</code> instead of <code>q.client</code>.</p><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">$HOME/wave-apps/counter.py</div><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd undefined">Copy</button><div tabindex="0" class="prism-code language-py codeBlock_3iAC codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> h2o_wave </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> Q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> listen</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> ui</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">async</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">serve</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    bean_count </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">bean_count </span><span class="token keyword" style="font-style:italic">or</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">increment</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">bean_count </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> bean_count </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> bean_count </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">not</span><span class="token plain"> q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">initialized</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">initialized </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">True</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;beans&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> ui</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">form_card</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            box</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;1 1 1 2&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            items</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                ui</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">button</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;increment&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    label</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Click me!&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    caption</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string-interpolation string" style="color:rgb(195, 232, 141)">f&#x27;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string-interpolation interpolation">bean_count</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-interpolation string" style="color:rgb(195, 232, 141)"> beans&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    primary</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token boolean" style="color:rgb(255, 88, 116)">True</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">else</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;beans&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">items</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">button</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">caption </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:rgb(195, 232, 141)">f&#x27;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string-interpolation interpolation">bean_count</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-interpolation string" style="color:rgb(195, 232, 141)"> beans&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">save</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">listen</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/counter&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> serve</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div><p>If we run this app, we&#x27;ll see that the counts are being maintained across browser tabs, but the updated counts don&#x27;t show up immediately across all tabs. Instead, they show up only when you interact with the other tabs, or reload them. </p><video autoplay="autoplay" loop="" muted=""><source src="/wave/assets/medias/tutorial-counter__user-nosync-85ed939bea17453866c14ee5359992ef.mp4" type="video/mp4"></video><p>This would be considered normal behavior for a typical web application, and most users familiar with the interwebs are also familiar with the reload button, but we can do better, because having to hit the reload button to get updates is about as exciting as waiting for paint to dry.</p><p>This is easier done than said - simply change the server mode to <code>multicast</code> to enable realtime sync across clients:</p><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">$HOME/wave-apps/counter.py</div><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd undefined">Copy</button><div tabindex="0" class="prism-code language-py codeBlock_3iAC codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> h2o_wave </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> Q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> listen</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> ui</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">async</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">serve</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    bean_count </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">bean_count </span><span class="token keyword" style="font-style:italic">or</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">increment</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">bean_count </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> bean_count </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> bean_count </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">not</span><span class="token plain"> q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">initialized</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">initialized </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">True</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;beans&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> ui</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">form_card</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            box</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;1 1 1 2&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            items</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                ui</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">button</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;increment&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    label</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Click me!&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    caption</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string-interpolation string" style="color:rgb(195, 232, 141)">f&#x27;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string-interpolation interpolation">bean_count</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-interpolation string" style="color:rgb(195, 232, 141)"> beans&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    primary</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token boolean" style="color:rgb(255, 88, 116)">True</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">else</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;beans&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">items</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">button</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">caption </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:rgb(195, 232, 141)">f&#x27;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string-interpolation interpolation">bean_count</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-interpolation string" style="color:rgb(195, 232, 141)"> beans&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">save</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">listen</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/counter&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> serve</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> mode</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;multicast&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>The default server mode for apps is <code>unicast</code>, which means &quot;don&#x27;t sync across clients&quot;. On the other hand, <code>multicast</code> means &quot;sync across clients&quot;. There&#x27;s also a third mode, <code>broadcast</code>, which means &quot;sync across users&quot;, which we&#x27;ll see in the next step.</p></div></div><p>Re-running our app proves that the user-level bean count indeed syncs across tabs:</p><video autoplay="autoplay" loop="" muted=""><source src="/wave/assets/medias/tutorial-counter__user-sync-cc763711bfc051a85c3df8a8508135c7.mp4" type="video/mp4"></video><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="step-7-app-level-realtime-sync"></a>Step 7: App-level realtime sync<a aria-hidden="true" tabindex="-1" class="hash-link" href="#step-7-app-level-realtime-sync" title="Direct link to heading">#</a></h2><p>Going from user-level bean counting to app-level bean counting is easy: simply store <code>bean_count</code> on <code>q.app</code> instead of <code>q.user</code>, and switch the server mode to <code>broadcast</code>:</p><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">$HOME/wave-apps/counter.py</div><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd undefined">Copy</button><div tabindex="0" class="prism-code language-py codeBlock_3iAC codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> h2o_wave </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> Q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> listen</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> ui</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">async</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">serve</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    bean_count </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">bean_count </span><span class="token keyword" style="font-style:italic">or</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">increment</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">bean_count </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> bean_count </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> bean_count </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">not</span><span class="token plain"> q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">initialized</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">initialized </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">True</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;beans&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> ui</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">form_card</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            box</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;1 1 1 2&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            items</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                ui</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">button</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;increment&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    label</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Click me!&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    caption</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string-interpolation string" style="color:rgb(195, 232, 141)">f&#x27;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string-interpolation interpolation">bean_count</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-interpolation string" style="color:rgb(195, 232, 141)"> beans&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    primary</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token boolean" style="color:rgb(255, 88, 116)">True</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">else</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;beans&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">items</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">button</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">caption </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:rgb(195, 232, 141)">f&#x27;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string-interpolation interpolation">bean_count</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-interpolation string" style="color:rgb(195, 232, 141)"> beans&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">save</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">listen</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/counter&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> serve</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> mode</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;broadcast&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>The <code>broadcast</code> mode can be used to build collaborative apps that need to synchronize state across all users, like group chat or multiplayer games.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="summary"></a>Summary<a aria-hidden="true" tabindex="-1" class="hash-link" href="#summary" title="Direct link to heading">#</a></h2><p>In this tutorial, we learned how to author interactive applications, or <em>apps</em>, and easily add realtime sync capabilities to our apps. More importantly, we learned how to deal with events and manage state using four dictionary-like objects:</p><table><thead><tr><th>Attribute</th><th>Type</th><th>Use</th></tr></thead><tbody><tr><td><code>q.args</code></td><td>Read-only</td><td>Stores command arguments</td></tr><tr><td><code>q.client</code></td><td>Read/Write</td><td>Stores client-level state</td></tr><tr><td><code>q.user</code></td><td>Read/Write</td><td>Stores user-level state</td></tr><tr><td><code>q.app</code></td><td>Read/Write</td><td>Stores app-level state</td></tr></tbody></table><p>Also, we built ourselves a little app that counts beans, and you can now put that knowledge to good use, like build an online voting app for the upcoming elections in the banana republic you&#x27;re running on your private island (a smidgen of democracy can&#x27;t hurt).</p><p>In the next section, we&#x27;ll build something a bit more substantial and useful: a to-do list with realtime sync.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/h2oai/wave/edit/master/website/docs/tutorial-counter.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/wave/docs/tutorial-monitor"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Tutorial: System Monitor</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/wave/docs/tutorial-todo"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Tutorial: Todo List Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link">Prerequisites</a></li><li><a href="#step-1-start-listening" class="table-of-contents__link">Step 1: Start listening</a></li><li><a href="#step-2-display-a-button" class="table-of-contents__link">Step 2: Display a button</a></li><li><a href="#step-3-handle-button-clicks" class="table-of-contents__link">Step 3: Handle button clicks</a></li><li><a href="#step-4-make-it-more-efficient" class="table-of-contents__link">Step 4: Make it more efficient</a></li><li><a href="#intermission-understanding-state" class="table-of-contents__link">Intermission: Understanding state</a></li><li><a href="#step-6-user-level-realtime-sync" class="table-of-contents__link">Step 6: User-level realtime sync</a></li><li><a href="#step-7-app-level-realtime-sync" class="table-of-contents__link">Step 7: App-level realtime sync</a></li><li><a href="#summary" class="table-of-contents__link">Summary</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Learn</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/wave/docs/examples">Gallery</a></li><li class="footer__item"><a class="footer__link-item" activebasepath="docs" href="/wave/docs/getting-started">Get Started</a></li><li class="footer__item"><a class="footer__link-item" href="/wave/docs/guide">Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/wave/docs/enterprise">Enterprise</a></li><li class="footer__item"><a class="footer__link-item" href="/wave/docs/api/index">API</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/h2o-wave" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://twitter.com/h2oai" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/h2oai/wave/releases/latest" target="_blank" rel="noopener noreferrer" class="footer__link-item">Download</a></li><li class="footer__item"><a href="https://github.com/h2oai/wave" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2020 <a href="https://h2o.ai" style="color:#ffe52b">H2O.ai</a>, Inc.</div></div></div></footer></div>
<script src="/wave/styles.f5ed2e52.js"></script>
<script src="/wave/runtime~main.f64344fe.js"></script>
<script src="/wave/main.64610da1.js"></script>
<script src="/wave/1.d3a71930.js"></script>
<script src="/wave/2.95b8a467.js"></script>
<script src="/wave/235.30963dc0.js"></script>
<script src="/wave/236.908f536c.js"></script>
<script src="/wave/935f2afb.aeb7338a.js"></script>
<script src="/wave/17896441.78666ca0.js"></script>
<script src="/wave/950656ac.0aadf206.js"></script>
</body>
</html>