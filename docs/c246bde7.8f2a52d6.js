(window.webpackJsonp=window.webpackJsonp||[]).push([[197],{251:function(e,n,r){"use strict";r.r(n),r.d(n,"frontMatter",(function(){return c})),r.d(n,"metadata",(function(){return i})),r.d(n,"rightToc",(function(){return u})),r.d(n,"default",(function(){return d}));var t=r(2),o=r(6),s=(r(0),r(313)),a=r(315),c={title:"Background Tasks / Progress",keywords:["background_tasks","progress"]},i={unversionedId:"examples/background-progress",id:"examples/background-progress",isDocsHomePage:!1,title:"Background Tasks / Progress",description:"Execute background functions while incrementing a progress bar.",source:"@site/docs/examples/background-progress.md",slug:"/examples/background-progress",permalink:"/wave/docs/examples/background-progress",editUrl:"https://github.com/h2oai/wave/edit/master/website/docs/examples/background-progress.md",version:"current",sidebar:"someSidebar",previous:{title:"Background Tasks / Executor",permalink:"/wave/docs/examples/background-executor"},next:{title:"Site / Async",permalink:"/wave/docs/examples/site-async"}},u=[],p={rightToc:u};function d(e){var n=e.components,c=Object(o.a)(e,["components"]);return Object(s.b)("wrapper",Object(t.a)({},p,c,{components:n,mdxType:"MDXLayout"}),Object(s.b)("p",null,"Execute background functions while incrementing a progress bar."),Object(s.b)("div",{className:"cover",style:{backgroundImage:"url("+r(510).default+")"}}),Object(s.b)("pre",null,Object(s.b)("code",Object(t.a)({parentName:"pre"},{className:"language-py"}),"import time\nimport asyncio\nimport concurrent.futures\nfrom h2o_wave import main, app, Q, ui\n\n\n# A long-running that performs a blocking operation, in this case time.sleep()\ndef blocking_function(secs) -> str:\n    time.sleep(secs)  # Blocks!\n    return 'Download completed!'\n\n\n# An async function that displays a progress bar\nasync def display_progress_bar(q: Q, form, seconds: int):\n    for i in range(seconds):\n        progress_value = (i + 1.0) / seconds\n        form.items = [\n            ui.progress(\n                label='Downloading the interwebs...',\n                caption=f'{int(progress_value * 100)}%',\n                value=progress_value,\n            )\n        ]\n        await q.page.save()\n        await q.sleep(1)\n\n\n@app('/demo')\nasync def serve(q: Q):\n    if q.args.start:  # The button named 'start' was clicked\n        seconds = 5\n\n        # Grab a reference to the form\n        form = q.page['form']\n\n        # Start incrementing the progress bar in the background\n        future = asyncio.ensure_future(display_progress_bar(q, form, seconds))\n\n        # Execute our long-running function in the background\n        with concurrent.futures.ThreadPoolExecutor() as pool:\n            message = await q.exec(pool, blocking_function, seconds)\n\n        # Stop the progress bar (optional unless we used a infinite while loop in display_progress_bar()).\n        future.cancel()\n\n        # At this point, we're done with the long-running function; so display a completion message\n        form.items = [ui.message_bar('info', message)]\n        await q.page.save()\n    else:\n        q.page['form'] = ui.form_card(box='1 1 -1 -1', items=[ui.button(name='start', label='Start')])\n        await q.page.save()\n")),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"Tags"),": \u2002",Object(s.b)("a",{href:Object(a.a)("docs/examples/tags#background_tasks")},"background_tasks")," \u2002",Object(s.b)("a",{href:Object(a.a)("docs/examples/tags#progress")},"progress")))}d.isMDXComponent=!0},313:function(e,n,r){"use strict";r.d(n,"a",(function(){return d})),r.d(n,"b",(function(){return b}));var t=r(0),o=r.n(t);function s(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function a(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function c(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?a(Object(r),!0).forEach((function(n){s(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function i(e,n){if(null==e)return{};var r,t,o=function(e,n){if(null==e)return{};var r,t,o={},s=Object.keys(e);for(t=0;t<s.length;t++)r=s[t],n.indexOf(r)>=0||(o[r]=e[r]);return o}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(t=0;t<s.length;t++)r=s[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var u=o.a.createContext({}),p=function(e){var n=o.a.useContext(u),r=n;return e&&(r="function"==typeof e?e(n):c(c({},n),e)),r},d=function(e){var n=p(e.components);return o.a.createElement(u.Provider,{value:n},e.children)},f={inlineCode:"code",wrapper:function(e){var n=e.children;return o.a.createElement(o.a.Fragment,{},n)}},l=o.a.forwardRef((function(e,n){var r=e.components,t=e.mdxType,s=e.originalType,a=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),d=p(r),l=t,b=d["".concat(a,".").concat(l)]||d[l]||f[l]||s;return r?o.a.createElement(b,c(c({ref:n},u),{},{components:r})):o.a.createElement(b,c({ref:n},u))}));function b(e,n){var r=arguments,t=n&&n.mdxType;if("string"==typeof e||t){var s=r.length,a=new Array(s);a[0]=l;var c={};for(var i in n)hasOwnProperty.call(n,i)&&(c[i]=n[i]);c.originalType=e,c.mdxType="string"==typeof e?e:t,a[1]=c;for(var u=2;u<s;u++)a[u]=r[u];return o.a.createElement.apply(null,a)}return o.a.createElement.apply(null,r)}l.displayName="MDXCreateElement"},314:function(e,n,r){"use strict";var t=r(0),o=r(19);n.a=function(){const e=Object(t.useContext)(o.a);if(null===e)throw new Error("Docusaurus context not provided");return e}},315:function(e,n,r){"use strict";r.d(n,"b",(function(){return s})),r.d(n,"a",(function(){return a}));var t=r(314),o=r(316);function s(){const{siteConfig:{baseUrl:e="/",url:n}={}}=Object(t.a)();return{withBaseUrl:(r,t)=>function(e,n,r,{forcePrependBaseUrl:t=!1,absolute:s=!1}={}){if(!r)return r;if(r.startsWith("#"))return r;if(Object(o.b)(r))return r;if(t)return n+r;const a=r.startsWith(n)?r:n+r.replace(/^\//,"");return s?e+a:a}(n,e,r,t)}}function a(e,n={}){const{withBaseUrl:r}=s();return r(e,n)}},316:function(e,n,r){"use strict";function t(e){return!0===/^(\w*:|\/\/)/.test(e)}function o(e){return void 0!==e&&!t(e)}r.d(n,"b",(function(){return t})),r.d(n,"a",(function(){return o}))},510:function(e,n,r){"use strict";r.r(n),n.default="data:image/png;base64,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"}}]);