(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{144:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return i})),a.d(t,"metadata",(function(){return c})),a.d(t,"rightToc",(function(){return s})),a.d(t,"default",(function(){return l}));var r=a(2),n=a(6),o=(a(0),a(300)),i={title:"Architecture"},c={unversionedId:"architecture",id:"architecture",isDocsHomePage:!1,title:"Architecture",description:"H2O Wave is a software stack for building beautiful, low-latency, realtime, browser-based applications and dashboards entirely in Python without using HTML, Javascript or CSS.",source:"@site/docs/architecture.md",slug:"/architecture",permalink:"/wave/docs/architecture",editUrl:"https://github.com/h2oai/wave/edit/master/website/docs/architecture.md",version:"current",sidebar:"someSidebar",previous:{title:"Introduction",permalink:"/wave/docs/guide"},next:{title:"Wave Scripts",permalink:"/wave/docs/scripts"}},s=[{value:"Overview",id:"overview",children:[]},{value:"How does it work?",id:"how-does-it-work",children:[]},{value:"How is it different?",id:"how-is-it-different",children:[]}],p={rightToc:s};function l(e){var t=e.components,a=Object(n.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},p,a,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"H2O Wave is a software stack for building beautiful, low-latency, realtime, browser-based applications and dashboards entirely in Python without using HTML, Javascript or CSS."),Object(o.b)("p",null,"It excels at capturing data, visualizations, and graphics from multiple sources, and broadcasting them live over the web."),Object(o.b)("p",null,"The stack is engineered from the ground-up for low-latency, realtime information display, and is usable on its own (not only a programming framework, but a programmable content server)."),Object(o.b)("h2",{id:"overview"},"Overview"),Object(o.b)("p",null,"The Wave runtime operates over three tiers:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"A content server.")," The Wave server, a ~10MB static binary executable that runs anywhere",Object(o.b)("sup",Object(r.a)({parentName:"li"},{id:"fnref-1"}),Object(o.b)("a",Object(r.a)({parentName:"sup"},{href:"#fn-1",className:"footnote-ref"}),"1")),"."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"A language driver.")," The ",Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"https://pypi.org/project/h2o-wave/"}),"h2o-wave PyPI package")," used by Wave scripts and apps."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"A browser-based client.")," The user interface and components.")),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{}),"+---------+                        +---------+\n| Browser +---------+      +------\x3e+ app1.py |\n+---------+         |      |       +---------+\n                    v      |\n+---------+       +-+------+-+     +---------+\n| Browser +------\x3e+  Server  +----\x3e+ app2.py |\n+---------+       +-+------+-+     +---------+\n                    ^      |\n+---------+         |      |       +---------+\n| Browser +---------+      +------\x3e+ app3.py |\n+---------+                        +---------+\n")),Object(o.b)("p",null,"The Wave server has three main functions:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Store site content"),Object(o.b)("li",{parentName:"ul"},"Transmit content changes to browsers."),Object(o.b)("li",{parentName:"ul"},"Transmit browser events to apps.")),Object(o.b)("p",null,"In other words, the Wave server is comparable to a in-memory realtime database, a HTTP web server and a proxy server, all rolled into one, with browsers (",Object(o.b)("em",{parentName:"p"},"clients"),") downstream, and Wave apps (or scripts) upstream."),Object(o.b)("p",null,"The language driver (the ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://pypi.org/project/h2o-wave/"}),"h2o-wave PyPI package"),") provides the ability to manage content on the Wave server. It's similar in function to a database driver, but unlike typical database drivers (which use SQL as a protocol), the Wave driver provides an API closely integrated with the Python language that feels natural and idiomatic in practice."),Object(o.b)("p",null,"The browser-based client's job is to render content on the user interface, and transmit user actions in the form of ",Object(o.b)("em",{parentName:"p"},"events")," back to the Wave server."),Object(o.b)("h2",{id:"how-does-it-work"},"How does it work?"),Object(o.b)("p",null,"The Wave server stores all content in a page cache called a ",Object(o.b)("em",{parentName:"p"},"site"),". A site is a collection of ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"/wave/docs/pages"}),"pages"),". Each page has an address, called its ",Object(o.b)("em",{parentName:"p"},"route"),". A page is composed of ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"/wave/docs/cards"}),"cards"),". A card holds content, and any tabular data associated with the content, called ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"/wave/docs/buffers"}),"data buffers"),". "),Object(o.b)("p",null,"When a browser is pointed to a route, it pulls a copy of the page, creates a ",Object(o.b)("em",{parentName:"p"},"replica")," locally, and renders the content on the user interface."),Object(o.b)("p",null,"The language driver (the ",Object(o.b)("inlineCode",{parentName:"p"},"h2o-wave")," PyPI package) maintains an illusion that server-side content is available locally. Local updates to pages and cards are transmitted in the form of ",Object(o.b)("em",{parentName:"p"},"operations")," to the server. The server applies those updates to the master copy of the content. If any browser is currently displaying that content, the server forwards updates to the browser, causing the browser to update its replica and re-render its user interface."),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{}),"   Python\n+------------+\n|  app.py    |\n|     +      |\n|     |      |\n|     v      |\n| +---+----+ |\n+-+ Driver +-+\n  +---+----+\n      |\n      |Operations\n      |\n      v\n+-----+------+\n|   Server   |\n|            |\n|  +------+  |\n|  | Page |  |\n|  +------+  |\n|            |\n+-----+------+\n      |\n      |Replication\n      |\n+-------------+\n| +---------+ |\n| | Replica | |\n| +---------+ |\n|             |\n|     UI      |\n+-------------+\n    Browser\n")),Object(o.b)("p",null,"The language driver can be used by two kinds of Python programs: ",Object(o.b)("em",{parentName:"p"},"Wave apps")," and ",Object(o.b)("em",{parentName:"p"},"Wave scripts"),". "),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"/wave/docs/apps"}),"Wave apps")," are interactive programs that can update content and respond to user actions."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"/wave/docs/scripts"}),"Wave scripts")," are simpler, non-interactive (batch) programs: they can update content, but not respond to user actions. ")),Object(o.b)("p",null,"Wave apps are ASGI servers under the hood. When a Wave app is launched, it announces its existence to the Wave server, and the Wave server establishes a ",Object(o.b)("em",{parentName:"p"},"relay")," with the Wave app. When a browser tries to connect to an app, the Wave server acts as a hub, relaying information back and forth between the browser and the app. "),Object(o.b)("h2",{id:"how-is-it-different"},"How is it different?"),Object(o.b)("p",null,"The Wave server retains content. This is an important concept to understand, and the primary reason why Wave is different from a typical web framework. A Wave script can update content and exit, and the Wave server will happily continue serving that content. In other words, no Python process needs to be around if a new user arrives after you script has exited. "),Object(o.b)("p",null,"Different parts of the same page can be updated by different scripts running on different devices. Also, all content is live (or reactive) all the time: browsers always display up-to-date content without the need to reload."),Object(o.b)("hr",null),Object(o.b)("p",null,Object(o.b)("sup",Object(r.a)({parentName:"p"},{id:"fnref-1"}),Object(o.b)("a",Object(r.a)({parentName:"sup"},{href:"#fn-1",className:"footnote-ref"}),"1"))," Linux, Windows, Darwin, BSD, Solaris, Android on amd64, arm, 386, ppc, mips; ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://gist.github.com/asukakenji/f15ba7e588ac42795f421b48b8aede63"}),"almost everywhere"),"."))}l.isMDXComponent=!0},300:function(e,t,a){"use strict";a.d(t,"a",(function(){return b})),a.d(t,"b",(function(){return h}));var r=a(0),n=a.n(r);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var p=n.a.createContext({}),l=function(e){var t=n.a.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):c(c({},t),e)),a},b=function(e){var t=l(e.components);return n.a.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.a.createElement(n.a.Fragment,{},t)}},d=n.a.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),b=l(a),d=r,h=b["".concat(i,".").concat(d)]||b[d]||u[d]||o;return a?n.a.createElement(h,c(c({ref:t},p),{},{components:a})):n.a.createElement(h,c({ref:t},p))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=d;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:r,i[1]=c;for(var p=2;p<o;p++)i[p]=a[p];return n.a.createElement.apply(null,i)}return n.a.createElement.apply(null,a)}d.displayName="MDXCreateElement"}}]);